# Simple Development Dockerfile
# This version works without network dependencies using cached modules

FROM golang:1.23-alpine

# Set working directory
WORKDIR /app

# Copy everything (including go.mod and potential module cache)
COPY . .

# Create log directory
RUN mkdir -p /app/logs

# Expose port
EXPOSE 8080

# Set environment for development
ENV GO_ENV=development
ENV PORT=8080
ENV GIN_MODE=debug

# Try to build to verify dependencies are available (fallback to continue)
RUN go build . || echo "Build failed, but continuing..."

# Default command
CMD ["go", "run", "main.go"]